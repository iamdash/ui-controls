<!DOCTYPE html>
<html class="mdc-typography">

<head>
    <title>UI Controls</title>
    <!--<link href="https://fonts.googleapis.com/css?family=Roboto:350,400,500" rel="stylesheet">-->
    <!--<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">-->

    <!--<link rel="stylesheet" href="node_modules/material-components-web/dist/material-components-web.css">-->

    <link rel="stylesheet" href="app/components/round-slider/dist/roundslider.min.css" />
    <link rel="stylesheet" href="app/css/main.css">
    <!-- inject:css -->
    <!-- endinject -->

    <!-- build:js -->
    <!-- bower:js -->
    <script src="app/components/sightglass/index.js"></script>
    <script src="app/components/rivets/dist/rivets.js"></script>
    <script src="app/components/jquery/jquery.js"></script>
    <script src="app/components/underscore/underscore.js"></script>
    <script src="app/components/round-slider/dist/roundslider.min.js"></script>
    <script src="app/components/chart.js/dist/Chart.js"></script>
    <script src="app/components/d3/d3.js"></script>
    <!-- endbower -->
    <!-- inject:js -->
    <!-- endinject -->
    <!-- endbuild -->

    <script src="app/js/lib/calculator.js"></script>

</head>

<body class="mdc-typography demo-body">

    <div class="demo-toolbar mdc-theme--primary-bg mdc-theme--text-primary-on-primary mdc-typography--title mdc-elevation--z4">
        <button class="demo-menu material-icons">menu</button>
    </div>


    <main class="demo-main">

        <div id="chart"></div>

        <div class="mdc-layout-grid">
            <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-2 mdc-layout-grid__cell--span-2-tablet"></div>
            <div class="mdc-layout-grid__cell mdc-layout-grid__cell--span-8 mdc-layout-grid__cell--span-8-tablet">


                <div id="calculator">

                    <div class="calculator-dial-wrap">
                        <div class="calculator-dial"></div>
                    </div>


                    <!--<input type="text" rv-value="numVal" class="dial" max="45" min="13">
                    <input type="range" rv-value="numVal" id="range-slider" min=1 max="100">
                    <input type="number" rv-value="numVal" id="num-input">
                    <h2> { calculatedValue }</h2>-->

                    <!--<canvas id="myChart" width="400" height="400"></canvas>-->
                </div>
    </main>



    <script>
        (function(d3) {

            var toggleColor = (function() {
                var currentColor = "grey";

                return function() {

                    currentColor = currentColor == "grey" ? "magenta" : "grey";
                    d3.select(this).style("fill", currentColor);
                }
            })();
            setTimeout(function() {
                var range = 52;
                var size = 240 / 12
                var dataset = [];
                for (var i = 0; i < range; i++) {
                    dataset.push({
                        label: 'grey',
                        count: size,
                        itemNumber: i + 1
                    });
                    if (i < range - 1) {
                        dataset.push({
                            label: 'white',
                            count: size / 2,
                            isSegmentGap: true
                        })
                    }

                }


                var width = 395;
                var height = 395;
                var radius = Math.min(width, height) / 2;
                var donutWidth = 75; // NEW
                var color = d3.scaleOrdinal(d3.schemeCategory20b);
                var svg = d3.select('.rs-inner-container')
                    .append('svg')
                    .attr('width', width)
                    .attr('height', height)
                    .attr('id', 'circle-segments')
                    .append('g')
                    .attr('transform', 'translate(' + (width / 2) +
                        ',' + (height / 2) + ')');
                var arc = d3.arc()
                    .innerRadius(radius - donutWidth) // UPDATED
                    .outerRadius(radius);


                var startAngle = -130;
                var endAngle = startAngle + 260;

                var pie = d3.pie()
                    .value(function(d) {
                        return d.count;
                    })
                    .startAngle(startAngle * (Math.PI / 180))
                    .endAngle(endAngle * (Math.PI / 180))
                    .sort(null);
                var path = svg.selectAll('path')
                    .data(pie(dataset))
                    .enter()
                    .append('path')
                    .attr("data-item-number", function(d) {

                        return d.data.itemNumber;
                    })
                    .attr('d', arc)
                    .attr('class', 'pie-segment')
                    .attr('fill', function(d, i) {
                        return d.data.label;
                    }).on('click', toggleColor);

                // $(".pie-segment").on("click", function(e) {
                //     var $clicked = $(e.currentTarget)
                //     console.log($clicked.data())
                // });
            }, 0)

            'use strict';

        })(window.d3);
    </script>
</body>

</html>